<nav class="sticky-top d-flex flex-column vh-100">
  <div class="d-flex flex-column align-items-center pt-2 vh-100" *ngIf="isLoggedIn$ | async">
        <i class="bi bi-box-seam-fill text-warning mt-5" style="font-size: 4rem;"></i>
    <ul class="nav nav-pills flex-column mb-sm-auto mb-0 mt-0 me-auto py-sm-4 justify-content-center align-items-sm-start w-100" id="menu">
        <li class="w-100 ps-5 py-2 navItem" ngxTippy="Página principal" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
          <a [routerLink]="getInicioRoute()" class="nav-link d-flex align-items-center px-0 icon-link icon-link-hover">
            <i class="fs-3 bi bi-house-door"></i><span class="fs-5 ms-3 pt-3 d-none d-xl-inline">Inicio</span>
          </a>
        </li>
        <li class="w-100 navItem" [ngClass]="{'ps-5 pt-2': isEmpleado() || isEncargado()}">
          <a href="#submenu0" data-bs-toggle="collapse" class="nav-link px-0 d-flex align-items-center" *ngIf="isEmpleado() || isEncargado()" ngxTippy="Pedidos" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
            <i class="fs-3 bi bi-table"></i><span class="fs-5 ms-3 d-none d-xl-inline">Pedidos</span><i class="ms-3 bi bi-caret-down d-none d-xl-inline"></i><span class="d-none d-xl-inline"></span>
          </a>
        </li>
          <ul class="collapse list-unstyled flex-column mx-auto" id="submenu0" data-bs-parent="#menu">
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Ver pedidos" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
                <a routerLink="/pedidos" class="nav-link px-0 icon-link icon-link-hover" *ngIf="isEmpleado() || isEncargado()"><i class="fs-5 pb-4 bi bi-archive"></i><span class="d-none d-xl-inline ms-2">Ver pedidos</span></a>
            </li>
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Nuevo pedido" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
                <a routerLink="/gestionPedido" class="nav-link px-0 icon-link icon-link-hover" *ngIf="isEmpleado()"><i class="fs-5 pb-4 bi bi-box-seam"></i><span class="d-none d-xl-inline ms-2">Nuevo pedido</span></a>
            </li>
          </ul>
        <li class="w-100 navItem" [ngClass]="{'ps-5 pt-2': isEmpleado() || isEncargado()}" ngxTippy="Incidencias" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
          <a href="#submenu1" data-bs-toggle="collapse" class="nav-link px-0 d-flex align-items-center" *ngIf="isEmpleado() || isEncargado()">
            <i class="fs-3 bi bi-speedometer2"></i><span class="fs-5 ms-3 d-none d-xl-inline">Incidencias</span><i class="ms-3 bi bi-caret-down d-none d-xl-inline"></i>
          </a>
        </li>
          <ul class="collapse list-unstyled flex-column mx-auto" id="submenu1" data-bs-parent="#menu">
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Ver incidencias" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
                <a routerLink="/incidencias" class="nav-link px-0 icon-link icon-link-hover" *ngIf="isEmpleado() || isEncargado()"><i class="fs-5 pb-4 bi bi-exclamation-triangle"></i><span class="d-none d-xl-inline ms-2">Ver incidencias</span></a>
            </li>
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Abrir incidencia" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
                <a routerLink="/nuevaIncidencia" class="nav-link px-0 icon-link icon-link-hover"*ngIf="isEmpleado()"><i class="fs-5 bi bi-input-cursor-text"></i><span class="d-none d-xl-inline ms-2">Abrir incidencia</span></a>
            </li>
          </ul>
        <li class="w-100 navItem" [ngClass]="{'ps-5 pt-2': isAdmin()}" ngxTippy="Almacenes" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
          <a href="#submenu2" data-bs-toggle="collapse" class="nav-link px-0 d-flex align-items-center" *ngIf="isAdmin()">
            <i class="fs-3 bi bi-shop-window"></i><span class="fs-5 ms-3 d-none d-xl-inline">Almacenes</span><i class="ms-3 bi bi-caret-down d-none d-xl-inline"></i>
          </a>
        </li>
          <ul class="collapse list-unstyled flex-column mx-auto" id="submenu2" data-bs-parent="#menu">
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Ver almacenes" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
              <a routerLink="/almacenes" class="nav-link px-0 icon-link icon-link-hover"><i class="fs-5 bi bi-list"></i><span class="d-none d-xl-inline ms-2">Ver almacenes</span></a>
            </li>
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Crear almacén" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
              <a routerLink="/nuevoAlmacen" class="nav-link px-0 icon-link icon-link-hover"><i class="fs-5 bi bi-pen"></i><span class="d-none d-xl-inline ms-2">Crear almacén</span></a>
            </li>
          </ul>
        <li class="w-100 navItem" [ngClass]="{'ps-5 pt-2': isAdmin()}" ngxTippy="Empleados" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
          <a href="#submenu3" data-bs-toggle="collapse" class="nav-link px-0 d-flex align-items-center" *ngIf="isAdmin()">
            <i class="fs-3 bi bi-people"></i><span class="fs-5 ms-3 d-none d-xl-inline">Empleados</span><i class="ms-3 bi bi-caret-down d-none d-xl-inline"></i>
          </a>
        </li>
          <ul class="collapse list-unstyled flex-column mx-auto" id="submenu3" data-bs-parent="#menu">
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Ver empleados" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
              <a routerLink="/empleados" class="nav-link px-0 icon-link icon-link-hover"><i class="fs-5 bi bi-person-lines-fill"></i><span class="d-none d-xl-inline ms-2">Ver empleados</span></a>
            </li>
            <li class="w-100 px-3 px-lg-4 rounded-4 navItem_sub" ngxTippy="Crear empleado" tippyClassName="custom-class" [tippyProps]="{ placement: 'right' }">
              <a routerLink="/empleado/nuevo" class="nav-link px-0 icon-link icon-link-hover"><i class="fs-5 bi bi-person-plus"></i><span class="d-none d-xl-inline ms-2">Crear empleado</span></a>
            </li>
          </ul>
    </ul>
  </div>
  <div class="p-3 userSidebar sticky-bottom d-flex flex-column justify-content-center bg-warning justify-content-end">
    <div class="d-flex align-items-center justify-content-center position-relative">
      
      <div class="bg-gray position-absolute top-0 bottom-0 left-0 right-0 rounded-circle" style="width: 80px; height: 80px;"></div>
     
      <img [src]="imagenesService.getImagenEmpleado(empleado.imagen_empleado)" alt="Imagen Empleado" width="90" height="90" class="rounded-circle position-relative border border-3 border-dark border-opacity-75">
     
      <i class="fs-3 bi bi-person-circle position-absolute top-50 start-50 translate-middle text-white" *ngIf="!empleado?.imagen_empleado"></i>
    </div>
    
    <span class="d-none d-xl-inline mt-2 fs-4 text-black text-center">{{ empleado?.nombre + ' ' + empleado.apellidos || 'User Name' }}</span>
    
    <a class="d-flex align-items-center justify-content-center nav-link icon-link icon-link-hover" routerLink="/login" (click)="onLogout()">
      <span class="d-none d-xl-inline text-black">Cerrar sesión</span>
      <i class="fs-4 bi bi-box-arrow-right ms-1 text-black"></i>
    </a>
  </div>
</nav>

